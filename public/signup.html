
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Login</title>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="css/mystyle.css">
        <link rel="stylesheet" href="css/signup.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    
    <script>
        var response="";
        function signup(){
            var credentials=new Object();
            credentials.username=document.getElementById("username").value;
            credentials.firstname=document.getElementById("firstname").value;
            credentials.lastname=document.getElementById("lastname").value;
            credentials.password=document.getElementById("password").value;
            credentials.phonenumber=document.getElementById("phonenumber").value;
            credentials.email=document.getElementById("email").value;
            credentials.address=document.getElementById("address").value;
            credentials.gender=document.getElementById("gender").value;
            credentials.profile_pic=document.getElementById("profile_pic").value;

            var request=new XMLHttpRequest();
            request.open("POST","/register",true);
            request.setRequestHeader("Content-Type", "application/json");

            request.onload=function(){
                document.getElementById("signup").click();
                alert("Thank you for joining Food Wars " +credentials.username + "! Please log in now")
                window.location="login.html?";
            };
            request.send(JSON.stringify(credentials));
        }
    </script>
    </head>

    <body>
        <center><img src="images/logored.png" height = "250" width = "750"></center>

        <form id = "signup" action="#" class="form signup"><center>
            
                <img id="profile_pic" src="images/noprofilepic.png" alt="Sample image" width="180" height="180" class="d-inline-block align-top"/>
                <br>
                <input type='file' onchange="readURL(this);" />
                <br>
                <p id="asterik"><span style="color: red;"> *</span> Denotes mandatory to fill up</p>
                
              
                <label for="username"></label>
                <input id="username"  type="text" placeholder="Username * " name="username" required />

                <label for="firstname"></label>
                <input id="firstname" type="text" placeholder="First Name * " name="firstname"  required /> 
          
                <label for="lastname"></label>
                <input id="lastname" type="text" placeholder="Last Name * " name="lastname"  required />
          
                <label for="password"></label>
                <input id="password" type="password" placeholder="Password * " name="password"  required />
              
                <label for="phonenumber"></label>
                <input id="phonenumber" type="text" placeholder="Phone Number * " name="phonenumber"  required /> 
              
                <label for="email"></label>
                <input id="email" type="text" placeholder="Email * " name="email"  required />
              
                <label for="address"></label>
                <input id="address"  type="text" placeholder="Address * " name="address" required />

                <label for="gender" style="font-size: 20px; font-weight: bold;">Gender<span style="color: red;"> *</span>:</label> 
                <select id="gender" name="gender" required>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                    <option value="Female">Others</option>
                </select>
                <br>
                <br>
                <input type="button" onclick="signup()" value="Sign Up">
        </form>

        <button type="button" onclick="location.href='login.html'">Login</button>
        <br>
        <button type="button" onclick="location.href='index.html'">Back</button>
    </center>
    </body>

    <!-- For picture -->
    <script>
            function readURL(input) {
                if (input.files && input.files[0]) {
                    var reader = new FileReader();
    
                    reader.onload = function (e) {
                        $('#profile_pic')
                            .attr('src', e.target.result);
                    };
    
                    reader.readAsDataURL(input.files[0]);
                }
            }
        </script>

</html>